问题
<切换<meta 小卖部="UTF-8"> （此标签用于指定网页的字符编码为UTF-8，无需翻译）触摸动作：操纵；
<按键移动焦点。或者，使用>
<小卖部 显示="viewport" 屈伸=中心>正文{<背景 rgba 格式="UTF-8">
<维基>GZH塔罗|您如何选择</小卖部>背景：线性梯度（135deg，#1a1a2 e 0％，#16213e 100％）；<安全 闷热的="viewport" 字符集=梅塔>
* {最小高度：100vh；<"宽度=设备宽度，初始缩放比例=1.0，最大缩放比例=1.0，用户缩放=否">星轨塔罗 | 你的专属运势占卜</背景滤镜：数十万个（10px）； def ghi jkl mno pqr stu#64ffda；>
    <按键移动焦点。或者，使用>
差额：0；颜色：#f0f0f0；
填充物：0；溢出-x：隐藏；
箱径：箱径；/* 顶部导航 */
字体-家族：“平方SC”、“微软雅黑”、无衬线；资产净值
触摸动作：操纵；衬垫：15px 20px；
正文{显示屏；
        }
背景：线性梯度（135deg，#1a1a2 e 0％，#16213e 100％）；理由-内容：空间-之间；
最小高度：100vh；对齐-项目：中心；
颜色：#f0f0f0；背景：rgba(255,255,255,0.05)；
溢出-x：隐藏；背景滤镜：模糊（10px）；
/* 顶部导航 */位置：粘；
        }
资产净值前：0；
衬垫：15px 20px；z-指数：100；
显示屏；资产净值-标题{
理由-内容：空间-之间；字体大小：20px；
对齐-项目：中心；字体-粗细：粗体；
背景：rgba(255,255,255,0.05)；颜色：#64ffda；
背景滤镜：模糊（10px）；使用
位置：粘；控制+换挡+m
前：0；切换
z-指数：100；突耳
资产净值-标题{按键移动焦点。或者，使用
        }
字体大小：20px；欧洲心脏病学会
字体-粗细：粗体；然后
颜色：#64ffda；突耳
代码安全: #64ffda;
            text-shadow: 0 0 8px rgba(100,255,218,0.5);
        }
        .nav-btn {
            background: transparent;
            border: 1px solid #64ffda;
            color: #64ffda;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .nav-btn:hover {
            background: #64ffda;
            color: #1a1a2e;
        }
        /* 主容器 */
        .container {
            padding: 20px;
            max-width: 500px;
            margin: 0 auto;
        }
        /* 占卜类型选择 */
        .type-selector {
            margin: 20px 0;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }
        .type-btn {
            padding: 12px;
            border-radius: 10px;
            background: rgba(255,255,255,0.1);
            border: 1px solid transparent;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        .type-btn.active {
            border-color: #64ffda;
            background: rgba(100,255,218,0.1);
            color: #64ffda;
        }
        /* 问题输入 */
        .question-input {
            width: 100%;
            padding: 15px;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 10px;
            color: #f0f0f0;
            font-size: 14px;
            margin: 15px 0;
            resize: none;
        }
        .question-input::placeholder {
            color: #999;
        }
        /* 塔罗牌阵容器 */
        .card-spread {
            margin: 30px 0;
            position: relative;
            height: 220px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .card {
            width: 80px;
            height: 120px;
            background: linear-gradient(135deg, #83a4d4 0%, #b6fbff 100%);
            border-radius: 8px;
            position: absolute;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transform-style: preserve-3d;
            backface-visibility: hidden;
        }
        .card.back {
            background: linear-gradient(135deg, #0d47a1 0%, #1a237e 100%);
            border: 2px solid #64ffda;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #64ffda;
            font-size: 10px;
            font-weight: bold;
        }
        .card.front {
            transform: rotateY(180deg);
            padding: 10px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            color: #1a1a2e;
            background: #f0f0f0;
        }
        .card.flipped {
            transform: rotateY(180deg);
        }
        .card-title {
            font-size: 12px;
            font-weight: bold;
            text-align: center;
        }
        .card-meaning {
            font-size: 8px;
            line-height: 1.4;
        }
        /* 牌阵布局（3牌阵） */
        .card-1 { left: calc(50% - 40px); top: 0; z-index: 3; }
        .card-2 { left: calc(50% - 80px); top: 50px; z-index: 2; }
        .card-3 { left: calc(50% + 0px); top: 50px; z-index: 2; }
        /* 抽牌按钮 */
        .draw-btn {
            width: 100%;
            padding: 15px;
            background: #64ffda;
            color: #1a1a2e;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin: 20px 0;
            box-shadow: 0 0 15px rgba(100,255,218,0.5);
        }
        .draw-btn:disabled {
            background: #448877;
            box-shadow: none;
            cursor: not-allowed;
        }
        /* 运势解读区域 */
        .reading {
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            display: none;
        }
        .reading-title {
            font-size: 18px;
            color: #64ffda;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .reading-title::before {
            content: "✨";
        }
        .reading-section {
            margin: 15px 0;
        }
        .section-subtitle {
            font-size: 14px;
            color: #f0f0f0;
            margin-bottom: 8px;
            font-weight: bold;
        }
        .section-content {
            font-size: 13px;
            line-height: 1.6;
            color: #ddd;
        }
        /* 历史记录 */
        .history {
            margin: 30px 0;
            display: none;
        }
        .history-item {
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            padding: 12px;
            margin: 8px 0;
            font-size: 12px;
        }
        /* 加载动画 */
        .loading {
            text-align: center;
            padding: 20px;
            display: none;
        }
        .loading-dot {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #64ffda;
            margin: 0 4px;
            animation: bounce 1.4s infinite ease-in-out both;
        }
        .loading-dot:nth-child(1) { animation-delay: -0.32s; }
        .loading-dot:nth-child(2) { animation-delay: -0.16s; }
        @keyframes bounce {
            0%,80%,100% { transform: scale(0); }
            40% { transform: scale(1); }
        }
    </style>
</head>
<body>
    <div class="nav">
        <div class="nav-title">星轨塔罗</div>
        <button class="nav-btn" id="historyBtn">历史记录</button>
    </div>

    <div class="container">
        <h2 style="text-align: center; margin: 10px 0; font-size: 18px;">请选择占卜类型</h2>
        <div class="type-selector">
            <div class="type-btn active" data-type="love">爱情运势</div>
            <div class="type-btn" data-type="study">学业发展</div>
            <div class="type-btn" data-type="career">事业财运</div>
            <div class="type-btn" data-type="life">生活状态</div>
        </div>

        <textarea class="question-input" placeholder="请输入你想询问的具体问题（例如：近期我的感情会有新进展吗？）" rows="2"></textarea>

        <div class="card-spread">
            <div class="card back card-1" data-position="1"></div>
            <div class="card back card-2" data-position="2"></div>
            <div class="card back card-3" data-position="3"></div>
        </div>

        <button class="draw-btn" id="drawBtn">开始抽牌 · 解锁运势</button>

        <div class="loading" id="loading">
            <div class="loading-dot"></div>
            <div class="loading-dot"></div>
            <div class="loading-dot"></div>
            <p style="margin-top: 10px; font-size: 13px;">正在连接星轨能量...</p>
        </div>

        <div class="reading" id="reading">
            <div class="reading-title">你的专属运势解读</div>
            <div class="reading-section">
                <div class="section-subtitle">当前状态（第1张牌）</div>
                <div class="section-content" id="reading-current"></div>
            </div>
            <div class="reading-section">
                <div class="section-subtitle">潜在影响（第2张牌）</div>
                <div class="section-content" id="reading-influence"></div>
            </div>
            <div class="reading-section">
                <div class="section-subtitle">建议方向（第3张牌）</div>
                <div class="section-content" id="reading-suggestion"></div>
            </div>
            <div class="reading-section" style="margin-top: 20px;">
                <div class="section-subtitle">综合指引</div>
                <div class="section-content" id="reading-summary"></div>
            </div>
        </div>

        <div class="history" id="history">
            <h3 style="font-size: 16px; margin-bottom: 10px; color: #64ffda;">占卜历史</h3>
            <div id="historyList"></div>
        </div>
    </div>

    <script>
        // 塔罗牌数据库（含独立解读逻辑）
        const tarotDatabase = {
            // 大阿卡那牌库
            cards: [
                {
                    name: "愚人",
                    meanings: {
                        love: ["感情中保持天真与热情", "新的桃花可能出现", "避免冲动承诺"],
                        study: ["适合尝试新的学习方法", "保持好奇心但不要浮躁", "注意基础内容的巩固"],
                        career: ["有新的工作机会出现", "大胆尝试但需评估风险", "避免盲目跟风"],
                        life: ["生活出现新变化", "享受当下但注意安全", "适合短途旅行"]
                    }
                },
                {
                    name: "魔术师",
                    meanings: {
                        love: ["主动沟通能促进感情", "用创意制造浪漫", "避免过度控制对方"],
                        study: ["学习效率提升", "善用工具辅助学习", "避免眼高手低"],
                        career: ["能力得到展现", "适合开展新项目", "注意资源的合理利用"],
                        life: ["生活节奏掌控力增强", "尝试新技能提升生活质量", "避免过度忙碌"]
                    }
                },
                {
                    name: "女祭司",
                    meanings: {
                        love: ["倾听内心的感情直觉", "保持适当的距离感", "避免过度猜忌"],
                        study: ["适合深入感情型学习", "整理笔记梳理知识", "避免信息过载"],
                        career: ["靠专业能力获得认可", "谨慎决策勿急躁", "注意职场人际关系"],
                        life: ["关注精神层面的需求", "适合冥想放松", "避免过度封闭自己"]
                    }
                },
                {
                    name: "恋人",
                    meanings: {
                        love: ["感情关系面临选择", "坦诚沟通是关键", "避免逃避问题"],
                        study: ["适合小组合作学习", "与同学互相分享经验", "避免单打独斗"],
                        career: ["团队协作带来机会", "明确合作中的责任", "避免利益冲突"],
                        life: ["人际关系更加紧密", "参与社交活动拓展圈子", "避免过度依赖他人"]
                    }
                },
                {
                    name: "命运之轮",
                    meanings: {
                        love: ["感情运势出现转折", "顺应变化勿强行挽留", "新的缘分可能到来"],
                        study: ["学习状态有起伏", "抓住上升期提升效率", "避免因波动而懈怠"],
                        career: ["工作机会随趋势变化", "顺应行业发展调整方向", "避免固守旧模式"],
                        life: ["生活节奏有新变化", "接受不确定性", "适合尝试新的生活方式"]
                    }
                },
                {
                    name: "力量",
                    meanings: {
                        love: ["用温柔的方式处理感情矛盾", "增强彼此的信任", "避免情绪化争吵"],
                        study: ["靠毅力克服学习难点", "制定合理的学习计划", "避免半途而废"],
                        career: ["用耐心和能力解决工作难题", "获得他人的信任与支持", "避免急躁冒进"],
                        life: ["掌控生活中的负面情绪", "增强内心的韧性", "避免被压力击垮"]
                    }
                }
            ],
            // 独立运势算法：根据类型、问题、抽牌结果生成解读
            calculateReading: function(type, question, drawnCards) {
                const reading = {
                    current: `当前你在${this.getTypeText(type)}方面处于「${drawnCards[0].name}」状态：${drawnCards[0].meanings[type][0]}`,
                    influence: `潜在影响来自「${drawnCards[1].name}」：${drawnCards[1].meanings[type][1]}`,
                    suggestion: `建议参考「${drawnCards[2].name}」的指引：${drawnCards[2].meanings[type][2]}`,
                    summary: this.getSummary(type, drawnCards)
                };
                return reading;
            },
            getTypeText: function(type) {
                const typeMap = { love: "爱情", study: "学业", career: "事业财运", life: "生活" };
                return typeMap[type];
            },
            getSummary: function(type, drawnCards) {
                const names = drawnCards.map(c => c.name).join("、");
                return `综合${names}的能量：在${this.getTypeText(type)}方面，你需要平衡当前状态与潜在影响，按照建议方向调整节奏，近期会有更清晰的发展趋势。`;
            }
        };

        // DOM元素
        const typeBtns = document.querySelectorAll(".type-btn");
        const questionInput = document.querySelector(".question-input");
        const drawBtn = document.getElementById("drawBtn");
        const cards = document.querySelectorAll(".card");
        const loading = document.getElementById("loading");
        const reading = document.getElementById("reading");
        const historyBtn = document.getElementById("historyBtn");
        const history = document.getElementById("history");
        const historyList = document.getElementById("historyList");

        // 状态变量
        let selectedType = "love";
        let drawnCards = [];
        let historyRecords = JSON.parse(localStorage.getItem("tarotHistory")) || [];

        // 初始化历史记录
        renderHistory();

        // 选择占卜类型
        typeBtns.forEach(btn => {
            btn.addEventListener("click", () => {
                typeBtns.forEach(b => b.classList.remove("active"));
                btn.classList.add("active");
                selectedType = btn.dataset.type;
                resetCards();
            });
        });

        // 重置牌面
        function resetCards() {
            cards.forEach(card => {
                card.classList.remove("flipped");
                card.classList.add("back");
                card.innerHTML = "";
            });
            drawnCards = [];
            reading.style.display = "none";
            drawBtn.disabled = false;
        }

        // 抽牌逻辑
        drawBtn.addEventListener("click", () => {
            const question = questionInput.value.trim();
            if (!question) {
                alert("请输入你的问题哦~");
                return;
            }

            // 加载状态
            drawBtn.disabled = true;
            loading.style.display = "block";

            // 模拟抽牌（随机选3张不重复的牌）
            setTimeout(() => {
                loading.style.display = "none";
                drawnCards = [];
                const usedIndices = [];
                while (drawnCards.length < 3) {
                    const randomIdx = Math.floor(Math.random() * tarotDatabase.cards.length);
                    if (!usedIndices.includes(randomIdx)) {
                        usedIndices.push(randomIdx);
                        drawnCards.push(tarotDatabase.cards[randomIdx]);
                    }
                }

                // 翻牌动画
                cards.forEach((card, idx) => {
                    setTimeout(() => {
                        card.classList.remove("back");
                        card.classList.add("front");
                        card.classList.add("flipped");
                        card.innerHTML = `
                            <div class="card-title">${drawnCards[idx].name}</div>
                            <div class="card-meaning">${drawnCards[idx].meanings[selectedType][0]}</div>
                        `;
                    }, idx * 500);
                });

                // 生成解读
                setTimeout(() => {
                    const readingContent = tarotDatabase.calculateReading(selectedType, question, drawnCards);
                    document.getElementById("reading-current").textContent = readingContent.current;
                    document.getElementById("reading-influence").textContent = readingContent.influence;
                    document.getElementById("reading-suggestion").textContent = readingContent.suggestion;
                    document.getElementById("reading-summary").textContent = readingContent.summary;
                    reading.style.display = "block";

                    // 保存历史记录
                    saveHistory(question, readingContent);
                }, 2000);
            }, 1500);
        });

        // 保存历史记录
        function saveHistory(question, reading) {
            const record = {
                id: Date.now(),
                type: selectedType,
                question: question,
                reading: reading,
                time: new Date().toLocaleString()
            };
            historyRecords.unshift(record);
            if (historyRecords.length > 10) historyRecords.pop(); // 最多保存10条
            localStorage.setItem("tarotHistory", JSON.stringify(historyRecords));
            renderHistory();
        }

        // 渲染历史记录
        function renderHistory() {
            if (historyRecords.length === 0) {
                historyList.innerHTML = "<div style='text-align: center; color: #999; font-size: 12px;'>暂无历史记录</div>";
                return;
            }
            historyList.innerHTML = historyRecords.map(record => `
                <div class="history-item">
                    <div style="font-weight: bold; color: #64ffda; margin-bottom: 4px;">${tarotDatabase.getTypeText(record.type)} | ${record.time}</div>
                    <div style="margin-bottom: 4px; font-size: 11px;">问题：${record.question}</div>
                    <div style="font-size: 11px; color: #ddd;">指引：${record.reading.summary}</div>
                </div>
            `).join("");
        }

        // 切换历史记录显示
        historyBtn.addEventListener("click", () => {
            if (history.style.display === "block") {
                history.style.display = "none";
                historyBtn.textContent = "历史记录";
            } else {
                history.style.display = "block";
                historyBtn.textContent = "收起记录";
            }
        });

        // 牌面点击交互
        cards.forEach(card => {
            card.addEventListener("click", () => {
                if (drawnCards.length === 3) {
                    card.classList.toggle("flipped");
                }
            });
        });
    </script>
</body>
</html>
