<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ˜Ÿè¾°å¡”ç½— - ä¸“ä¸šè¿åŠ¿å åœ</title>
    <style>
        /* åŸºç¡€æ ·å¼ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Microsoft YaHei', sans-serif;
        }
        
        :root {
            --primary: #8a2be2;
            --secondary: #4b0082;
            --accent: #ff69b4;
            --light: #f8f4ff;
            --dark: #1a0526;
            --text: #333333;
            --text-light: #ffffff;
        }
        
        body {
            background: linear-gradient(135deg, #1a0526 0%, #2d0b42 50%, #4a1e6b 100%);
            color: var(--text-light);
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        /* å¤´éƒ¨æ ·å¼ */
        header {
            text-align: center;
            padding: 30px 0;
            position: relative;
        }
        
        h1 {
            font-size: 3.5rem;
            color: var(--accent);
            text-shadow: 0 0 15px rgba(255, 105, 180, 0.7);
            margin-bottom: 10px;
            letter-spacing: 3px;
            background: linear-gradient(45deg, var(--accent), #ffd700);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: #c9b6e2;
            margin-bottom: 30px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }
        
        /* ä¸»å†…å®¹åŒºåŸŸ */
        .main-content {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            margin-bottom: 40px;
        }
        
        .user-input-section {
            flex: 1;
            min-width: 300px;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .tarot-display {
            flex: 2;
            min-width: 300px;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        h2 {
            color: var(--accent);
            margin-bottom: 20px;
            font-size: 1.8rem;
            border-bottom: 1px solid rgba(255, 105, 180, 0.3);
            padding-bottom: 10px;
            display: flex;
            align-items: center;
        }
        
        h2 i {
            margin-right: 10px;
        }
        
        /* è¡¨å•æ ·å¼ */
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            color: #c9b6e2;
            font-weight: 500;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px 15px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            color: var(--text-light);
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 10px rgba(255, 105, 180, 0.3);
            background: rgba(255, 255, 255, 0.15);
        }
        
        textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        /* æŒ‰é’®æ ·å¼ */
        .btn {
            display: block;
            width: 100%;
            padding: 15px;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            border: none;
            border-radius: 10px;
            color: white;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
            letter-spacing: 1px;
            box-shadow: 0 5px 15px rgba(138, 43, 226, 0.4);
        }
        
        .btn:hover {
            background: linear-gradient(45deg, var(--accent), var(--primary));
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        /* ç‰Œé˜µé€‰æ‹© */
        .spread-options {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        .spread-option {
            flex: 1;
            min-width: 80px;
            text-align: center;
            padding: 12px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid transparent;
        }
        
        .spread-option:hover {
            background: rgba(255, 105, 180, 0.1);
            border-color: rgba(255, 105, 180, 0.3);
        }
        
        .spread-option.active {
            background: rgba(255, 105, 180, 0.2);
            border-color: var(--accent);
            box-shadow: 0 0 10px rgba(255, 105, 180, 0.3);
        }
        
        /* å¡”ç½—ç‰Œæ ·å¼ */
        .tarot-cards {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        
        .tarot-card {
            width: 150px;
            height: 250px;
            perspective: 1000px;
            cursor: pointer;
        }
        
        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.8s;
            transform-style: preserve-3d;
        }
        
        .tarot-card.flipped .card-inner {
            transform: rotateY(180deg);
        }
        
        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
            overflow: hidden;
        }
        
        .card-front {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border: 2px solid var(--accent);
            color: white;
            font-weight: bold;
            font-size: 1.2rem;
        }
        
        .card-back {
            background: linear-gradient(135deg, var(--accent), #ff8cc6);
            transform: rotateY(180deg);
            color: white;
            padding: 10px;
            flex-direction: column;
            text-align: center;
        }
        
        .card-name {
            font-size: 1.1rem;
            font-weight: bold;
            margin-bottom: 10px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }
        
        .card-meaning {
            font-size: 0.85rem;
            line-height: 1.4;
        }
        
        /* è¿åŠ¿è§£è¯»åŒºåŸŸ */
        .reading-result {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            margin-top: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .result-title {
            color: var(--accent);
            font-size: 1.5rem;
            margin-bottom: 15px;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .result-content {
            line-height: 1.6;
            font-size: 1.05rem;
        }
        
        .result-section {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .result-section:last-child {
            border-bottom: none;
        }
        
        .result-section h4 {
            color: var(--accent);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }
        
        /* å†å²è®°å½• */
        .history-section {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin-top: 30px;
        }
        
        .history-list {
            max-height: 300px;
            overflow-y: auto;
            margin-top: 15px;
        }
        
        .history-item {
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            margin-bottom: 10px;
            border-left: 3px solid var(--accent);
            transition: all 0.3s ease;
        }
        
        .history-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(5px);
        }
        
        .history-date {
            font-size: 0.9rem;
            color: #c9b6e2;
            margin-bottom: 5px;
        }
        
        .history-question {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .history-cards {
            font-size: 0.9rem;
            color: #c9b6e2;
        }
        
        /* é¡µè„š */
        footer {
            text-align: center;
            padding: 30px 0;
            color: #c9b6e2;
            font-size: 0.9rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            margin-top: 40px;
        }
        
        /* æ˜Ÿæ˜ŸèƒŒæ™¯ */
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }
        
        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle 5s infinite;
        }
        
        @keyframes twinkle {
            0% { opacity: 0.2; }
            50% { opacity: 1; }
            100% { opacity: 0.2; }
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }
            
            h1 {
                font-size: 2.5rem;
            }
            
            .tarot-card {
                width: 120px;
                height: 200px;
            }
            
            .spread-options {
                flex-direction: column;
            }
        }
        
        /* å›¾æ ‡æ ·å¼ */
        .icon {
            display: inline-block;
            margin-right: 8px;
        }
        
        /* è¿åŠ¿æŒ‡ç¤ºå™¨ */
        .luck-meter {
            height: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            margin: 10px 0;
            overflow: hidden;
        }
        
        .luck-level {
            height: 100%;
            border-radius: 5px;
            transition: width 1s ease;
        }
        
        .luck-label {
            display: flex;
            justify-content: space-between;
            font-size: 0.8rem;
            color: #c9b6e2;
        }
        
        /* åŠ¨ç”»æ•ˆæœ */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.8s ease forwards;
        }
        
        /* åŠ è½½åŠ¨ç”» */
        .loader {
            display: none;
            text-align: center;
            padding: 20px;
        }
        
        .loader-spinner {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(255, 255, 255, 0.1);
            border-top: 5px solid var(--accent);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="stars" id="stars"></div>
    
    <div class="container">
        <header>
            <h1>æ˜Ÿè¾°å¡”ç½—</h1>
            <p class="subtitle">æ¢ç´¢æœªçŸ¥ï¼Œæ´æ‚‰å‘½è¿ï¼Œè®©å¡”ç½—ç‰ŒæŒ‡å¼•æ‚¨å‰è¡Œçš„é“è·¯ã€‚é€šè¿‡å¤è€çš„æ™ºæ…§ï¼Œæ­ç¤ºå½“ä¸‹çš„è¿åŠ¿ä¸æœªæ¥çš„å¯èƒ½ã€‚</p>
        </header>
        
        <div class="main-content">
            <section class="user-input-section">
                <h2><span class="icon">ğŸ”®</span>ä¸ªäººä¿¡æ¯</h2>
                <div class="form-group">
                    <label for="name">å§“å</label>
                    <input type="text" id="name" placeholder="è¯·è¾“å…¥æ‚¨çš„å§“å">
                </div>
                
                <div class="form-group">
                    <label for="birthdate">å‡ºç”Ÿæ—¥æœŸ</label>
                    <input type="date" id="birthdate">
                </div>
                
                <div class="form-group">
                    <label for="question">æ‚¨çš„é—®é¢˜</label>
                    <textarea id="question" placeholder="è¯·æè¿°æ‚¨æƒ³è¯¢é—®çš„é—®é¢˜..."></textarea>
                </div>
                
                <div class="form-group">
                    <label for="reading-type">å åœç±»å‹</label>
                    <select id="reading-type">
                        <option value="daily">æ¯æ—¥è¿åŠ¿</option>
                        <option value="love">çˆ±æƒ…è¿åŠ¿</option>
                        <option value="career">äº‹ä¸šè¿åŠ¿</option>
                        <option value="financial">è´¢è¿åˆ†æ</option>
                        <option value="general">ç»¼åˆè¿åŠ¿</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>ç‰Œé˜µé€‰æ‹©</label>
                    <div class="spread-options">
                        <div class="spread-option active" data-spread="single">
                            <div>å•å¼ ç‰Œ</div>
                            <small>å¿«é€Ÿæ´å¯Ÿ</small>
                        </div>
                        <div class="spread-option" data-spread="three">
                            <div>ä¸‰å¼ ç‰Œ</div>
                            <small>è¿‡å»-ç°åœ¨-æœªæ¥</small>
                        </div>
                        <div class="spread-option" data-spread="celtic">
                            <div>å‡¯å°”ç‰¹åå­—</div>
                            <small>æ·±åº¦åˆ†æ</small>
                        </div>
                    </div>
                </div>
                
                <button class="btn" id="draw-cards">
                    <span class="icon">âœ¨</span>æŠ½å–å¡”ç½—ç‰Œ
                </button>
                
                <div class="loader" id="loader">
                    <div class="loader-spinner"></div>
                    <p>æ­£åœ¨è¿æ¥å®‡å®™èƒ½é‡ï¼Œè§£è¯»å¡”ç½—ç‰Œçš„å¥¥ç§˜...</p>
                </div>
            </section>
            
            <section class="tarot-display">
                <h2><span class="icon">ğŸ“œ</span>å¡”ç½—ç‰Œé˜µ</h2>
                <div class="tarot-cards" id="tarot-cards">
                    <div class="instruction">
                        <p>è¯·å¡«å†™å·¦ä¾§ä¿¡æ¯å¹¶æŠ½å–å¡”ç½—ç‰Œï¼Œç‰Œé˜µå°†åœ¨æ­¤æ˜¾ç¤ºã€‚</p>
                    </div>
                </div>
                
                <div class="reading-result" id="reading-result">
                    <div class="result-title">
                        <span class="icon">ğŸŒŸ</span>è¿åŠ¿è§£è¯»
                    </div>
                    <div class="result-content" id="result-content">
                        <p>è¯·å…ˆå¡«å†™ä¸ªäººä¿¡æ¯å¹¶æŠ½å–å¡”ç½—ç‰Œï¼Œç³»ç»Ÿå°†ä¸ºæ‚¨ç”Ÿæˆä¸“å±è¿åŠ¿è§£è¯»ã€‚</p>
                    </div>
                </div>
            </section>
        </div>
        
        <section class="history-section">
            <h2><span class="icon">ğŸ“–</span>å†å²å åœè®°å½•</h2>
            <div class="history-list" id="history-list">
                <div class="empty-history">
                    <p>æš‚æ— å†å²è®°å½•ï¼Œå®Œæˆä¸€æ¬¡å åœåè®°å½•å°†æ˜¾ç¤ºåœ¨è¿™é‡Œã€‚</p>
                </div>
            </div>
        </section>
        
        <footer>
            <p>å¡”ç½—ç‰Œå åœç»“æœä»…ä¾›å‚è€ƒï¼Œå‘½è¿æŒæ¡åœ¨è‡ªå·±æ‰‹ä¸­</p>
            <p>Â© 2023 æ˜Ÿè¾°å¡”ç½— | æ¢ç´¢å†…å¿ƒï¼Œé¢„è§æœªæ¥</p>
        </footer>
    </div>

    <script>
        // å¡”ç½—ç‰Œæ•°æ® - å®Œæ•´78å¼ å¡”ç½—ç‰Œ
        const tarotDeck = [
            // å¤§é˜¿å¡çº³ (22å¼ )
            { name: "æ„šè€…", number: 0, upright: "æ–°çš„å¼€å§‹,å†’é™©,è‡ªç”±,å¤©çœŸ", reversed: "é²è½,é£é™©,ä¸ç¡®å®š,æ„šè ¢" },
            { name: "é­”æœ¯å¸ˆ", number: 1, upright: "æ„å¿—åŠ›,èƒ½åŠ›,èµ„æº,åˆ›é€ åŠ›", reversed: "æ¬ºéª—,æ“çºµ,æœªå¼€å‘æ½œåŠ›,å»¶è¿Ÿ" },
            { name: "å¥³ç¥­å¸", number: 2, upright: "ç›´è§‰,æ½œæ„è¯†,ç¥ç§˜,æ™ºæ…§", reversed: "ç§˜å¯†,å‹æŠ‘,æœªè¡¨è¾¾çš„æƒ…æ„Ÿ,å¿½è§†" },
            { name: "å¥³çš‡", number: 3, upright: "ä¸°é¥¶,æ¯æ€§,åˆ›é€ åŠ›,è‡ªç„¶", reversed: "ä¾èµ–,è¿‡åº¦æ”¾çºµ,åˆ›é€ åŠ›å—é˜»,ç–å¿½" },
            { name: "çš‡å¸", number: 4, upright: "æƒå¨,ç»“æ„,æ§åˆ¶,ç¨³å®š", reversed: "ä¸“åˆ¶,åƒµåŒ–,æ§åˆ¶æ¬²è¿‡å¼º,ä¸çµæ´»" },
            { name: "æ•™çš‡", number: 5, upright: "ä¿¡ä»°,ä¼ ç»Ÿ,çµæ€§,æ•™è‚²", reversed: "æ•™æ¡,ä¼ ç»ŸæŸç¼š,åå›,æ–°æ€æƒ³" },
            { name: "æ‹äºº", number: 6, upright: "çˆ±æƒ…,é€‰æ‹©,å’Œè°,å…³ç³»", reversed: "å†²çª,åˆ†ç¦»,é”™è¯¯é€‰æ‹©,ä¸å’Œè°" },
            { name: "æˆ˜è½¦", number: 7, upright: "æ„å¿—åŠ›,èƒœåˆ©,è‡ªå¾‹,æ§åˆ¶", reversed: "å¤±æ§,å†²çª,ç¼ºä¹æ–¹å‘,ä¾µç•¥" },
            { name: "åŠ›é‡", number: 8, upright: "å‹‡æ°”,è€å¿ƒ,æ§åˆ¶,åŒæƒ…", reversed: "è½¯å¼±,ææƒ§,è‡ªæˆ‘æ€€ç–‘,æ— åŠ›" },
            { name: "éšå£«", number: 9, upright: "å†…çœ,å¯»æ±‚çœŸç†,å­¤ç‹¬,æ™ºæ…§", reversed: "å­¤ç«‹,é€ƒé¿,æ‹’ç»å¸®åŠ©,å­¤ç‹¬" },
            { name: "å‘½è¿ä¹‹è½®", number: 10, upright: "å‘½è¿,è½¬æŠ˜ç‚¹,æœºé‡,å¾ªç¯", reversed: "åè¿æ°”,æŠ—æ‹’æ”¹å˜,å¤–éƒ¨æ§åˆ¶,å»¶è¿Ÿ" },
            { name: "æ­£ä¹‰", number: 11, upright: "å…¬æ­£,çœŸç†,å› æœ,å¹³è¡¡", reversed: "ä¸å…¬æ­£,åè§,è´£ä»»é€ƒé¿,ä¸å…¬å¹³" },
            { name: "å€’åŠäºº", number: 12, upright: "ç‰ºç‰²,æ–°è§†è§’,é¡ºä»,ç­‰å¾…", reversed: "åœæ»,æ— è°“ç‰ºç‰²,æŠ—æ‹’,ä¸è€çƒ¦" },
            { name: "æ­»ç¥", number: 13, upright: "ç»“æŸ,è½¬å˜,æ–°ç”Ÿ,é‡Šæ”¾", reversed: "æŠ—æ‹’æ”¹å˜,åœæ»,ææƒ§,ç¼“æ…¢å˜åŒ–" },
            { name: "èŠ‚åˆ¶", number: 14, upright: "å¹³è¡¡,è°ƒå’Œ,è€å¿ƒ,å’Œè°", reversed: "ä¸å¹³è¡¡,æç«¯,ç¼ºä¹èŠ‚åˆ¶,å†²çª" },
            { name: "æ¶é­”", number: 15, upright: "æŸç¼š,ç‰©è´¨ä¸»ä¹‰,æ¬²æœ›,æˆç˜¾", reversed: "è§£è„±,è¶…è¶Šé™åˆ¶,æ–°è®¤è¯†,é‡Šæ”¾" },
            { name: "é«˜å¡”", number: 16, upright: "çªç„¶å˜åŒ–,å¯ç¤º,å´©æºƒ,é‡Šæ”¾", reversed: "é¿å…ç¾éš¾,ææƒ§æ”¹å˜,å‹æŠ‘,å»¶è¿Ÿ" },
            { name: "æ˜Ÿæ˜Ÿ", number: 17, upright: "å¸Œæœ›,çµæ„Ÿ,å®é™,ä¿¡å¿ƒ", reversed: "ç»æœ›,å¤±æœ›,å¤±å»ä¿¡å¿ƒ,æ‚²è§‚" },
            { name: "æœˆäº®", number: 18, upright: "å¹»è§‰,ææƒ§,æ½œæ„è¯†,ç›´è§‰", reversed: "é‡Šæ”¾ææƒ§,çœŸç›¸,å†…å¿ƒå¹³é™,æ¸…æ™°" },
            { name: "å¤ªé˜³", number: 19, upright: "å¿«ä¹,æˆåŠŸ,æ´»åŠ›,ç§¯æ", reversed: "æš‚æ—¶æŒ«æŠ˜,è¿‡åº¦ä¹è§‚,è‡ªè´Ÿ,å»¶è¿Ÿ" },
            { name: "å®¡åˆ¤", number: 20, upright: "è§‰é†’,é‡ç”Ÿ,å†…çœ,èµ¦å…", reversed: "è‡ªæˆ‘æ€€ç–‘,æ‹’ç»å¬å”¤,ææƒ§æ”¹å˜,åœæ»" },
            { name: "ä¸–ç•Œ", number: 21, upright: "å®Œæˆ,æˆå°±,æ—…è¡Œ,æ•´åˆ", reversed: "æœªå®Œæˆ,å»¶è¿Ÿ,éœ€è¦é—­åˆ,ä¸å®Œç¾" },
            
            // æƒæ–ç»„ (14å¼ )
            { name: "æƒæ–ç‹ç‰Œ", suit: "wands", upright: "åˆ›é€ åŠ›,æ–°å†’é™©,çµæ„Ÿ,æ½œåŠ›", reversed: "å»¶è¿Ÿ,æœªå®ç°çš„åˆ›æ„,ç¼ºä¹æ–¹å‘" },
            { name: "æƒæ–äºŒ", suit: "wands", upright: "è§„åˆ’,å†³ç­–,å‘ç°,æœªæ¥", reversed: "ææƒ§æ”¹å˜,ä¸è‰¯è§„åˆ’,çŠ¹è±«" },
            { name: "æƒæ–ä¸‰", suit: "wands", upright: "æ‰©å¼ ,è¿œè§,åˆä½œ,è¿›æ­¥", reversed: "å»¶è¿Ÿ,æŒ«æŠ˜,ç¼ºä¹è¿œè§" },
            { name: "æƒæ–å››", suit: "wands", upright: "ç¨³å®š,åº†ç¥,å’Œè°,åŸºç¡€", reversed: "ä¸ç¨³å®š,ç¼ºä¹åŸºç¡€,è¿‡æ¸¡" },
            { name: "æƒæ–äº”", suit: "wands", upright: "å†²çª,ç«äº‰,äº‰è®º,æŒ‘æˆ˜", reversed: "é¿å…å†²çª,å†…åœ¨å†²çª,è§£å†³" },
            { name: "æƒæ–å…­", suit: "wands", upright: "èƒœåˆ©,è¿›æ­¥,è‡ªä¿¡,æˆåŠŸ", reversed: "å¤±è´¥,ç¼ºä¹è®¤å¯,è‡ªè´Ÿ" },
            { name: "æƒæ–ä¸ƒ", suit: "wands", upright: "å‹‡æ°”,æŒ‘æˆ˜,åšæŒ,é˜²å¾¡", reversed: "æ”¾å¼ƒ,ä¸çŸ¥æ‰€æª,é˜²å¾¡" },
            { name: "æƒæ–å…«", suit: "wands", upright: "å¿«é€Ÿè¡ŒåŠ¨,è¿›å±•,æ¶ˆæ¯,æ—…è¡Œ", reversed: "å»¶è¿Ÿ,æŒ«æŠ˜,æ€¥èº,æ··ä¹±" },
            { name: "æƒæ–ä¹", suit: "wands", upright: "éŸ§æ€§,è°¨æ…,åšæŒ,ç»éªŒ", reversed: "å›ºæ‰§,é˜²å¾¡,åæ‰§,ç–²æƒ«" },
            { name: "æƒæ–å", suit: "wands", upright: "è´Ÿæ‹…,è´£ä»»,åŠªåŠ›,å‹åŠ›", reversed: "æ— æ³•æ‰¿å—,é€ƒé¿è´£ä»»,é‡Šæ”¾" },
            { name: "æƒæ–ä¾ä»", suit: "wands", upright: "æ¢ç´¢,çƒ­æƒ…,æ¶ˆæ¯,è‡ªç”±ç²¾ç¥", reversed: "åæ¶ˆæ¯,çŠ¹è±«,ä¸å¯é " },
            { name: "æƒæ–éª‘å£«", suit: "wands", upright: "èƒ½é‡,æ¿€æƒ…,å†’é™©,å†²åŠ¨", reversed: "æ„¤æ€’,å†²åŠ¨,å»¶è¿Ÿ,æŒ«æŠ˜" },
            { name: "æƒæ–çš‡å", suit: "wands", upright: "è‡ªä¿¡,çƒ­æƒ…,ç‹¬ç«‹,æ´»åŠ›", reversed: "å«‰å¦’,è‡ªç§,æ„¤æ€’,ç¼ºä¹è‡ªä¿¡" },
            { name: "æƒæ–å›½ç‹", suit: "wands", upright: "é¢†å¯¼,è¿œè§,ä¼ä¸šå®¶ç²¾ç¥,è£èª‰", reversed: "æ”¯é…,æ€¥èº,æ— æƒ…,ä¸çµæ´»" },
            
            // åœ£æ¯ç»„ (14å¼ )
            { name: "åœ£æ¯ç‹ç‰Œ", suit: "cups", upright: "æ–°æƒ…æ„Ÿ,ç›´è§‰,åˆ›é€ åŠ›,çµæ€§", reversed: "æƒ…æ„Ÿé—­å¡,ç©ºè™š,å¤±å»è”ç³»" },
            { name: "åœ£æ¯äºŒ", suit: "cups", upright: "å’Œè°,ä¼™ä¼´å…³ç³»,è¿æ¥,å¸å¼•åŠ›", reversed: "ä¸å¹³è¡¡,åˆ†ç¦»,è¯¯è§£" },
            { name: "åœ£æ¯ä¸‰", suit: "cups", upright: "åº†ç¥,å‹è°Š,åˆ›é€ åŠ›,ç¤¾åŒº", reversed: "è¿‡åº¦æ”¾çºµ,å…«å¦,å­¤ç«‹" },
            { name: "åœ£æ¯å››", suit: "cups", upright: "æ²‰æ€,ä¸æ»¡,é‡æ–°è¯„ä¼°,é€€ç¼©", reversed: "é”™è¿‡æœºä¼š,åŒå€¦,è§‰é†’" },
            { name: "åœ£æ¯äº”", suit: "cups", upright: "æŸå¤±,æ‚²ä¼¤,è‡ªæ€œ,å¤±æœ›", reversed: "æ¥å—,å‰è¿›,å¯»æ‰¾å¸Œæœ›" },
            { name: "åœ£æ¯å…­", suit: "cups", upright: "æ€€æ—§,ç«¥å¹´,å›å¿†,å•çº¯", reversed: "ç”Ÿæ´»åœ¨è¿‡å»,å‰è¿›,æ”¾æ‰‹" },
            { name: "åœ£æ¯ä¸ƒ", suit: "cups", upright: "é€‰æ‹©,å¹»æƒ³,å†³ç­–,æƒ³è±¡", reversed: "ç¼ºä¹ç›®çš„,å›°æƒ‘,æ¸…é†’" },
            { name: "åœ£æ¯å…«", suit: "cups", upright: "ç¦»å¼€,å¯»æ±‚,æ”¾å¼ƒ,æ—…è¡Œ", reversed: "çŠ¹è±«,ææƒ§,åœæ»,æ»¡è¶³" },
            { name: "åœ£æ¯ä¹", suit: "cups", upright: "æ»¡è¶³,æ„¿æœ›æˆçœŸ,æˆå°±,å¿«ä¹", reversed: "ä¸æ»¡æ„,æœªå®ç°çš„æ„¿æœ›,è´ªå©ª" },
            { name: "åœ£æ¯å", suit: "cups", upright: "å’Œè°,å¹¸ç¦,å®¶åº­,å›¢ç»“", reversed: "ä¸å’Œè°,ç ´ç¢å®¶åº­,å†²çª" },
            { name: "åœ£æ¯ä¾ä»", suit: "cups", upright: "æ•æ„Ÿ,ç›´è§‰,åˆ›æ„,æ¢¦æƒ³å®¶", reversed: "æƒ…æ„Ÿè„†å¼±,ä¸æˆç†Ÿ,é€ƒé¿ç°å®" },
            { name: "åœ£æ¯éª‘å£«", suit: "cups", upright: "æµªæ¼«,é­…åŠ›,æƒ³è±¡åŠ›,æƒ…æ„Ÿ", reversed: "æƒ…ç»ªåŒ–,ä¸åˆ‡å®é™…,å¤±æœ›" },
            { name: "åœ£æ¯çš‡å", suit: "cups", upright: "åŒæƒ…,ç›´è§‰,æƒ…æ„Ÿ,å…³æ€€", reversed: "æƒ…ç»ªä¾èµ–,ä¸å®‰å…¨æ„Ÿ,è‡ªæˆ‘å¸æ”¶" },
            { name: "åœ£æ¯å›½ç‹", suit: "cups", upright: "æƒ…æ„Ÿå¹³è¡¡,åŒæƒ…,æ™ºæ…§,æ”¯æŒ", reversed: "æƒ…ç»ªæ“çºµ,å†·æ¼ ,è¿‡åº¦æ•æ„Ÿ" },
            
            // å®å‰‘ç»„ (14å¼ )
            { name: "å®å‰‘ç‹ç‰Œ", suit: "swords", upright: "çªç ´,æ–°æƒ³æ³•,æ™ºæ…§,çœŸç†", reversed: "æ··ä¹±,ç ´å,è¯¯å¯¼ä¿¡æ¯" },
            { name: "å®å‰‘äºŒ", suit: "swords", upright: "è‰°éš¾é€‰æ‹©,åƒµå±€,å¹³è¡¡", reversed: "ä¼˜æŸ”å¯¡æ–­,æ··ä¹±,æŠ«éœ²" },
            { name: "å®å‰‘ä¸‰", suit: "swords", upright: "å¿ƒç¢,æ‚²ä¼¤,ç—›è‹¦,åˆ†ç¦»", reversed: "æ¢å¤,å®½æ•,å’Œè§£" },
            { name: "å®å‰‘å››", suit: "swords", upright: "ä¼‘æ¯,æ¢å¤,æ²‰æ€,æ’¤é€€", reversed: "ç–²æƒ«, burnout,é‡æ–°è¿›å…¥ä¸–ç•Œ" },
            { name: "å®å‰‘äº”", suit: "swords", upright: "å†²çª,èƒœåˆ©ä¸æƒœä»£ä»·,æ•Œæ„", reversed: "å’Œè§£,å¦¥å,å¸å–æ•™è®­" },
            { name: "å®å‰‘å…­", suit: "swords", upright: "è¿‡æ¸¡,ç¦»å¼€,å‘å‰è¿ˆè¿›", reversed: "åœæ»,æ— æ³•å‰è¿›,æƒ…æ„ŸåŒ…è¢±" },
            { name: "å®å‰‘ä¸ƒ", suit: "swords", upright: "æ¬ºéª—,ç­–ç•¥,ä¿å¯†,è®¡åˆ’", reversed: "çœŸç›¸æš´éœ²,å¿æ‚”,é†’æ‚Ÿ" },
            { name: "å®å‰‘å…«", suit: "swords", upright: "é™åˆ¶,æŸç¼š,æ— åŠ›æ„Ÿ,ç„¦è™‘", reversed: "æ–°è§†è§’,è‡ªç”±,é‡Šæ”¾" },
            { name: "å®å‰‘ä¹", suit: "swords", upright: "ç„¦è™‘,æ‹…å¿§,ææƒ§,å¤±çœ ", reversed: "å¸Œæœ›,åº·å¤,é¢å¯¹ææƒ§" },
            { name: "å®å‰‘å", suit: "swords", upright: "ç»“æŸ,å¤±è´¥,ç—›è‹¦,èƒŒå›", reversed: "æ¢å¤,é‡ç”Ÿ,æ–°å¼€å§‹" },
            { name: "å®å‰‘ä¾ä»", suit: "swords", upright: "å¥½å¥‡å¿ƒ,è­¦è§‰,æ–°æƒ³æ³•,æ¶ˆæ¯", reversed: "æ¬ºéª—,æ¶æ„,è½»ç‡" },
            { name: "å®å‰‘éª‘å£«", suit: "swords", upright: "é‡å¿ƒ,è¡ŒåŠ¨,æœæ–­,ä¸“æ³¨", reversed: "å†²åŠ¨,ä¾µç•¥,é²è½" },
            { name: "å®å‰‘çš‡å", suit: "swords", upright: "ç‹¬ç«‹,åˆ¤æ–­,æ¸…æ™°,åŸåˆ™", reversed: "æ‰¹è¯„,å†·é…·,ä¸å®½å®¹" },
            { name: "å®å‰‘å›½ç‹", suit: "swords", upright: "æ™ºæ…§,æƒå¨,æ¸…æ™°,çœŸç†", reversed: "æ“çºµ,æ®‹é…·,æ»¥ç”¨æƒåŠ›" },
            
            // æ˜Ÿå¸ç»„ (14å¼ )
            { name: "æ˜Ÿå¸ç‹ç‰Œ", suit: "pentacles", upright: "ç¹è£,æ–°è´¢åŠ¡æœºä¼š, abundance", reversed: "é”™å¤±æœºä¼š, scarcity,æŠ•èµ„å¤±è´¥" },
            { name: "æ˜Ÿå¸äºŒ", suit: "pentacles", upright: "å¹³è¡¡,é€‚åº”,èµ„æºç®¡ç†", reversed: "ä¸å¹³è¡¡, disorganization,è´¢åŠ¡é—®é¢˜" },
            { name: "æ˜Ÿå¸ä¸‰", suit: "pentacles", upright: "å›¢é˜Ÿåˆä½œ,åä½œ,å­¦ä¹ ,æŠ€èƒ½", reversed: "ç¼ºä¹å›¢é˜Ÿåˆä½œ, disorganized,ç«äº‰" },
            { name: "æ˜Ÿå¸å››", suit: "pentacles", upright: "èŠ‚çº¦,å®‰å…¨,ä¿å®ˆ,æ§åˆ¶", reversed: "è´ªå©ª,ç‰©è´¨ä¸»ä¹‰,åå•¬" },
            { name: "æ˜Ÿå¸äº”", suit: "pentacles", upright: "å›°éš¾,è´«å›°,å­¤ç«‹,å¿§è™‘", reversed: "æ¢å¤,æ…ˆå–„,æ–°å¼€å§‹" },
            { name: "æ˜Ÿå¸å…­", suit: "pentacles", upright: "æ…·æ…¨,æ…ˆå–„,ç»™äºˆ,æ¥å—", reversed: "è‡ªç§,ä¸å¹³è¡¡è´¢å¯Œ, strings attached" },
            { name: "æ˜Ÿå¸ä¸ƒ", suit: "pentacles", upright: "è€å¿ƒ,æ”¶è·,åŠªåŠ›,è¯„ä¼°", reversed: "ç¼ºä¹æˆæœ,æ‹–å»¶,ä¸è€çƒ¦" },
            { name: "æ˜Ÿå¸å…«", suit: "pentacles", upright: "æŠ€èƒ½,å·¥è‰º,é‡å¤,ä¸“æ³¨", reversed: "ç¼ºä¹æ¿€æƒ…,æ— ç›®çš„å·¥ä½œ,ä½è´¨é‡" },
            { name: "æ˜Ÿå¸ä¹", suit: "pentacles", upright: "ä¸°å¯Œ,è‡ªç»™è‡ªè¶³,æˆå°±,äº«å—", reversed: "è¿‡åº¦ä¾èµ–,ç¼ºä¹æˆå°±æ„Ÿ,è™šå‡æˆåŠŸ" },
            { name: "æ˜Ÿå¸å", suit: "pentacles", upright: "è´¢å¯Œ,é—äº§,å®¶åº­,é•¿æœŸå®‰å…¨", reversed: "å®¶åº­å†²çª,ä¸ç¨³å®š,è´¢åŠ¡æŸå¤±" },
            { name: "æ˜Ÿå¸ä¾ä»", suit: "pentacles", upright: "é‡å¿ƒ,æ¬²æœ›å­¦ä¹ ,è´¢åŠ¡æœºä¼š", reversed: "ç¼ºä¹è¿›æ­¥,æ— çºªå¾‹,é²è½æ”¯å‡º" },
            { name: "æ˜Ÿå¸éª‘å£«", suit: "pentacles", upright: "è´£ä»»,å‹¤å¥‹,ä¼ ç»Ÿ,å®‰å…¨", reversed: "æ‡’æƒ°,æ— èŠ,åœæ»,ç²—å¿ƒ" },
            { name: "æ˜Ÿå¸çš‡å", suit: "pentacles", upright: "ç¹è£,èˆ’é€‚,å®‰å…¨,æ…·æ…¨", reversed: "ç‰©è´¨ä¸»ä¹‰,è´ªå©ª,ä¾èµ–,ä¸å®‰å…¨" },
            { name: "æ˜Ÿå¸å›½ç‹", suit: "pentacles", upright: "ä¸°å¯Œ,å®‰å…¨,é¢†å¯¼,æ§åˆ¶", reversed: "æƒå¨,è´ªå©ª,ä¿å®ˆ,ä¸çµæ´»" }
        ];

        // ç”Ÿæˆéšæœºæ˜Ÿæ˜ŸèƒŒæ™¯
        function createStars() {
            const starsContainer = document.getElementById('stars');
            const starCount = 150;
            
            for (let i = 0; i < starCount; i++) {
                const star = document.createElement('div');
                star.classList.add('star');
                
                // éšæœºä½ç½®å’Œå¤§å°
                const size = Math.random() * 3;
                star.style.width = `${size}px`;
                star.style.height = `${size}px`;
                star.style.left = `${Math.random() * 100}%`;
                star.style.top = `${Math.random() * 100}%`;
                
                // éšæœºåŠ¨ç”»å»¶è¿Ÿ
                star.style.animationDelay = `${Math.random() * 5}s`;
                
                starsContainer.appendChild(star);
            }
        }
        
        // åˆå§‹åŒ–é¡µé¢
        document.addEventListener('DOMContentLoaded', function() {
            createStars();
            setupEventListeners();
            loadHistory();
        });
        
        // è®¾ç½®äº‹ä»¶ç›‘å¬å™¨
        function setupEventListeners() {
            // ç‰Œé˜µé€‰æ‹©
            const spreadOptions = document.querySelectorAll('.spread-option');
            spreadOptions.forEach(option => {
                option.addEventListener('click', function() {
                    spreadOptions.forEach(opt => opt.classList.remove('active'));
                    this.classList.add('active');
                });
            });
            
            // æŠ½å–å¡”ç½—ç‰ŒæŒ‰é’®
            document.getElementById('draw-cards').addEventListener('click', drawTarotCards);
        }
        
        // æŠ½å–å¡”ç½—ç‰Œ
        function drawTarotCards() {
            const name = document.getElementById('name').value;
            const question = document.getElementById('question').value;
            const readingType = document.getElementById('reading-type').value;
            const activeSpread = document.querySelector('.spread-option.active').dataset.spread;
            
            if (!name || !question) {
                alert('è¯·å¡«å†™å§“åå’Œé—®é¢˜');
                return;
            }
            
            // æ˜¾ç¤ºåŠ è½½åŠ¨ç”»
            const loader = document.getElementById('loader');
            const drawButton = document.getElementById('draw-cards');
            loader.style.display = 'block';
            drawButton.disabled = true;
            
            // æ¸…ç©ºä¹‹å‰çš„ç‰Œ
            const tarotCardsContainer = document.getElementById('tarot-cards');
            tarotCardsContainer.innerHTML = '';
            
            // æ ¹æ®ç‰Œé˜µæŠ½å–ç‰Œ
            let cardCount = 1;
            if (activeSpread === 'three') cardCount = 3;
            if (activeSpread === 'celtic') cardCount = 10;
            
            const selectedCards = [];
            const usedIndices = new Set();
            
            // éšæœºé€‰æ‹©ä¸é‡å¤çš„ç‰Œ
            while (selectedCards.length < cardCount) {
                const randomIndex = Math.floor(Math.random() * tarotDeck.length);
                if (!usedIndices.has(randomIndex)) {
                    usedIndices.add(randomIndex);
                    const card = {...tarotDeck[randomIndex]};
                    
                    // éšæœºå†³å®šæ­£é€†ä½
                    card.isReversed = Math.random() > 0.5;
                    selectedCards.push(card);
                }
            }
            
            // å»¶è¿Ÿæ˜¾ç¤ºç‰Œï¼Œåˆ›é€ ç¥ç§˜æ„Ÿ
            setTimeout(() => {
                // åˆ›å»ºç‰Œå…ƒç´ 
                selectedCards.forEach((card, index) => {
                    const cardElement = document.createElement('div');
                    cardElement.className = 'tarot-card fade-in';
                    cardElement.style.animationDelay = `${index * 0.3}s`;
                    
                    // ä¸ºå‡¯å°”ç‰¹åå­—ç‰Œé˜µæ·»åŠ ä½ç½®æ ‡è¯†
                    let positionName = '';
                    if (activeSpread === 'celtic') {
                        const positions = [
                            "å½“å‰çŠ¶å†µ", "æŒ‘æˆ˜", "åŸºç¡€", "è¿‡å»", "ç›®æ ‡",
                            "æœªæ¥", "è‡ªæˆ‘è®¤çŸ¥", "ç¯å¢ƒ", "å¸Œæœ›ä¸ææƒ§", "ç»“æœ"
                        ];
                        positionName = positions[index];
                    } else if (activeSpread === 'three') {
                        const positions = ["è¿‡å»", "ç°åœ¨", "æœªæ¥"];
                        positionName = positions[index];
                    }
                    
                    cardElement.innerHTML = `
                        <div class="card-inner">
                            <div class="card-front">
                                ${positionName ? `<div>${positionName}</div>` : 'å¡”ç½—ç‰Œ'}
                            </div>
                            <div class="card-back">
                                <div class="card-name">${card.name} ${card.isReversed ? '(é€†ä½)' : '(æ­£ä½)'}</div>
                                <div class="card-meaning">${card.isReversed ? card.reversed : card.upright}</div>
                            </div>
                        </div>
                    `;
                    
                    // æ·»åŠ ç‚¹å‡»ç¿»è½¬æ•ˆæœ
                    cardElement.addEventListener('click', function() {
                        this.classList.toggle('flipped');
                    });
                    
                    tarotCardsContainer.appendChild(cardElement);
                    
                    // å»¶è¿Ÿæ˜¾ç¤ºç‰Œï¼Œåˆ›é€ åŠ¨ç”»æ•ˆæœ
                    setTimeout(() => {
                        cardElement.classList.add('flipped');
                    }, 500 + index * 300);
                });
                
                // ç”Ÿæˆè§£è¯»
                generateReading(name, question, readingType, activeSpread, selectedCards);
                
                // ä¿å­˜åˆ°å†å²è®°å½•
                saveToHistory(name, question, readingType, activeSpread, selectedCards);
                
                // éšè—åŠ è½½åŠ¨ç”»
                loader.style.display = 'none';
                drawButton.disabled = false;
            }, 1500);
        }
        
        // ç”Ÿæˆè¿åŠ¿è§£è¯»
        function generateReading(name, question, readingType, spreadType, cards) {
            const resultContent = document.getElementById('result-content');
            
            // æ ¹æ®å åœç±»å‹å’Œç‰Œç”Ÿæˆè§£è¯»
            let reading = '';
            
            // æ ¹æ®å åœç±»å‹æ·»åŠ ç‰¹å®šè§£è¯»
            const readingTypeText = {
                'daily': 'ä»Šæ—¥',
                'love': 'çˆ±æƒ…',
                'career': 'äº‹ä¸š',
                'financial': 'è´¢è¿',
                'general': 'æ•´ä½“'
            }[readingType];
            
            reading += `<div class="result-section">
                <h4><span class="icon">ğŸ’«</span>${readingTypeText}è¿åŠ¿è§£è¯»</h4>
                <p>äº²çˆ±çš„${name}ï¼Œå…³äºæ‚¨çš„é—®é¢˜ã€Œ${question}ã€ï¼Œä»¥ä¸‹æ˜¯å¡”ç½—ç‰Œä¸ºæ‚¨æ­ç¤ºçš„è¿åŠ¿ï¼š</p>
            </div>`;
            
            // æ ¹æ®ç‰Œé˜µç”Ÿæˆè§£è¯»
            if (spreadType === 'single') {
                const card = cards[0];
                reading += `<div class="result-section">
                    <h4><span class="icon">ğŸƒ</span>ç‰Œé¢è§£æ</h4>
                    <p>æ‚¨æŠ½åˆ°çš„ç‰Œæ˜¯<strong>${card.name}</strong>ï¼ˆ${card.isReversed ? 'é€†ä½' : 'æ­£ä½'}ï¼‰ã€‚</p>
                    <p>${card.isReversed ? card.reversed : card.upright}ã€‚</p>
                    <p>${generateDetailedInterpretation(card, readingType)}</p>
                </div>`;
            } else if (spreadType === 'three') {
                reading += `<div class="result-section">
                    <h4><span class="icon">ğŸƒ</span>ç‰Œé¢è§£æ</h4>
                    <p><strong>è¿‡å»ï¼š${cards[0].name}</strong>ï¼ˆ${cards[0].isReversed ? 'é€†ä½' : 'æ­£ä½'}ï¼‰ - ${cards[0].isReversed ? cards[0].reversed : cards[0].upright}</p>
                    <p><strong>ç°åœ¨ï¼š${cards[1].name}</strong>ï¼ˆ${cards[1].isReversed ? 'é€†ä½' : 'æ­£ä½'}ï¼‰ - ${cards[1].isReversed ? cards[1].reversed : cards[1].upright}</p>
                    <p><strong>æœªæ¥ï¼š${cards[2].name}</strong>ï¼ˆ${cards[2].isReversed ? 'é€†ä½' : 'æ­£ä½'}ï¼‰ - ${cards[2].isReversed ? cards[2].reversed : cards[2].upright}</p>
                    <p>${generateThreeCardReading(cards, readingType)}</p>
                </div>`;
            } else if (spreadType === 'celtic') {
                reading += `<div class="result-section">
                    <h4><span class="icon">ğŸƒ</span>ç‰Œé¢è§£æ</h4>
                    <p>æ‚¨ä½¿ç”¨äº†å‡¯å°”ç‰¹åå­—ç‰Œé˜µï¼Œè¿™æ˜¯ä¸€ç§æ·±å…¥çš„å åœæ–¹å¼ï¼š</p>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-top: 10px;">
                `;
                cards.forEach((card, index) => {
                    const positions = [
                        "å½“å‰çŠ¶å†µ", "æŒ‘æˆ˜", "åŸºç¡€", "è¿‡å»", "ç›®æ ‡",
                        "æœªæ¥", "è‡ªæˆ‘è®¤çŸ¥", "ç¯å¢ƒ", "å¸Œæœ›ä¸ææƒ§", "ç»“æœ"
                    ];
                    reading += `<div><strong>${positions[index]}ï¼š</strong> ${card.name}ï¼ˆ${card.isReversed ? 'é€†ä½' : 'æ­£ä½'}ï¼‰</div>`;
                });
                reading += `</div><p>${generateCelticCrossReading(cards, readingType)}</p></div>`;
            }
            
            // æ·»åŠ è¿åŠ¿æŒ‡æ•°
            reading += `<div class="result-section">
                <h4><span class="icon">ğŸ“Š</span>è¿åŠ¿æŒ‡æ•°</h4>
                ${generateLuckMeter(cards, readingType)}
            </div>`;
            
            // æ·»åŠ è¿åŠ¿å»ºè®®
            reading += `<div class="result-section">
                <h4><span class="icon">ğŸ’¡</span>è¿åŠ¿å»ºè®®</h4>
                <p>${generateAdvice(cards, readingType)}</p>
            </div>`;
            
            resultContent.innerHTML = reading;
        }
        
        // ç”Ÿæˆå•å¼ ç‰Œçš„è¯¦ç»†è§£è¯»
        function generateDetailedInterpretation(card, readingType) {
            const interpretations = {
                'daily': `ä»Šå¤©ï¼Œè¿™å¼ ç‰Œæç¤ºæ‚¨${card.isReversed ? 'éœ€è¦è­¦æƒ•' : 'å¯ä»¥å…³æ³¨'}${card.isReversed ? card.reversed : card.upright}çš„æ–¹é¢ã€‚`,
                'love': `åœ¨æ„Ÿæƒ…æ–¹é¢ï¼Œ${card.name}è¡¨ç¤º${card.isReversed ? 'å¯èƒ½é‡åˆ°' : 'é¢„ç¤ºç€'}${card.isReversed ? card.reversed : card.upright}çš„æƒ…æ„ŸçŠ¶å†µã€‚`,
                'career': `åœ¨äº‹ä¸šæ–¹é¢ï¼Œ${card.name}æš—ç¤º${card.isReversed ? 'éœ€è¦æ³¨æ„' : 'å°†è¿æ¥'}${card.isReversed ? card.reversed : card.upright}çš„èŒä¸šå‘å±•ã€‚`,
                'financial': `åœ¨è´¢åŠ¡æ–¹é¢ï¼Œ${card.name}è¡¨æ˜${card.isReversed ? 'è¦è°¨æ…å¯¹å¾…' : 'æœ‰æœºä¼šè·å¾—'}${card.isReversed ? card.reversed : card.upright}çš„è´¢å¯Œæœºé‡ã€‚`,
                'general': `åœ¨æ•´ä½“è¿åŠ¿ä¸Šï¼Œ${card.name}è±¡å¾ç€${card.isReversed ? 'å¯èƒ½é¢ä¸´' : 'å³å°†ç»å†'}${card.isReversed ? card.reversed : card.upright}çš„äººç”Ÿé˜¶æ®µã€‚`
            };
            
            return interpretations[readingType] || interpretations['general'];
        }
        
        // ç”Ÿæˆä¸‰å¼ ç‰Œé˜µçš„è§£è¯»
        function generateThreeCardReading(cards, readingType) {
            let interpretation = "ä»è¿‡å»åˆ°ç°åœ¨å†åˆ°æœªæ¥ï¼Œè¿™ä¸ªç‰Œé˜µæ­ç¤ºäº†æ‚¨è¿åŠ¿çš„å‘å±•è½¨è¿¹ã€‚";
            
            // æ ¹æ®æ­£é€†ä½æ•°é‡åˆ¤æ–­æ•´ä½“è¶‹åŠ¿
            const reversedCount = cards.filter(card => card.isReversed).length;
            
            if (reversedCount === 0) {
                interpretation += "æ‰€æœ‰ç‰Œéƒ½æ˜¯æ­£ä½ï¼Œè¡¨æ˜æ‚¨çš„è¿åŠ¿æ­£åœ¨ç§¯æå‘å±•ï¼Œäº‹æƒ…ä¼šæœç€æœ‰åˆ©çš„æ–¹å‘å‰è¿›ã€‚";
            } else if (reversedCount === 1) {
                interpretation += "å¤§éƒ¨åˆ†ç‰Œæ˜¯æ­£ä½ï¼Œåªæœ‰ä¸€å¼ é€†ä½ï¼Œè¡¨æ˜æ•´ä½“è¶‹åŠ¿è‰¯å¥½ï¼Œä½†éœ€è¦æ³¨æ„æŸä¸ªç‰¹å®šæ–¹é¢çš„æŒ‘æˆ˜ã€‚";
            } else if (reversedCount === 2) {
                interpretation += "æœ‰ä¸¤å¼ é€†ä½ç‰Œï¼Œè¡¨æ˜æ‚¨å¯èƒ½é¢ä¸´ä¸€äº›é˜»åŠ›æˆ–æŒ‘æˆ˜ï¼Œéœ€è¦æ›´å¤šçš„åŠªåŠ›æ¥å…‹æœå›°éš¾ã€‚";
            } else {
                interpretation += "æ‰€æœ‰ç‰Œéƒ½æ˜¯é€†ä½ï¼Œè¡¨æ˜å½“å‰æƒ…å†µæ¯”è¾ƒå¤æ‚ï¼Œå¯èƒ½éœ€è¦é‡æ–°è¯„ä¼°æ‚¨çš„é€‰æ‹©å’Œæ–¹æ³•ã€‚";
            }
            
            return interpretation;
        }
        
        // ç”Ÿæˆå‡¯å°”ç‰¹åå­—ç‰Œé˜µçš„è§£è¯»
        function generateCelticCrossReading(cards, readingType) {
            return "å‡¯å°”ç‰¹åå­—ç‰Œé˜µæä¾›äº†å¯¹æ‚¨é—®é¢˜çš„å…¨é¢åˆ†æã€‚è¿™ä¸ªå¤æ‚çš„ç‰Œé˜µæ­ç¤ºäº†é—®é¢˜çš„å„ä¸ªæ–¹é¢ï¼Œä»è¡¨é¢ç°è±¡åˆ°æ·±å±‚åŸå› ï¼Œä»è¿‡å»çš„å½±å“åˆ°æœªæ¥çš„å¯èƒ½å‘å±•ã€‚å»ºè®®æ‚¨ä»”ç»†æ€è€ƒæ¯å¼ ç‰Œåœ¨è‡ªå·±ç”Ÿæ´»ä¸­çš„å¯¹åº”æ„ä¹‰ï¼Œè¿™å°†å¸®åŠ©æ‚¨è·å¾—æ›´æ·±åˆ»çš„æ´å¯Ÿã€‚";
        }
        
        // ç”Ÿæˆè¿åŠ¿æŒ‡æ•°
        function generateLuckMeter(cards, readingType) {
            // è®¡ç®—è¿åŠ¿æŒ‡æ•° (0-100)
            let luckScore = 50; // åŸºç¡€åˆ†æ•°
            
            // æ ¹æ®æ­£é€†ä½è°ƒæ•´åˆ†æ•°
            const reversedCount = cards.filter(card => card.isReversed).length;
            const totalCards = cards.length;
            
            // é€†ä½ç‰Œè¶Šå¤šï¼Œåˆ†æ•°è¶Šä½
            luckScore -= (reversedCount / totalCards) * 30;
            
            // æ ¹æ®ç‰Œçš„ç±»å‹è°ƒæ•´åˆ†æ•°
            cards.forEach(card => {
                // å¤§é˜¿å¡çº³ç‰Œå½±å“åŠ›æ›´å¤§
                if (card.number !== undefined) {
                    // æŸäº›å¤§é˜¿å¡çº³ç‰Œä»£è¡¨å¥½è¿
                    if ([0, 1, 3, 6, 10, 14, 17, 19, 21].includes(card.number)) {
                        luckScore += card.isReversed ? -5 : 10;
                    }
                    // æŸäº›å¤§é˜¿å¡çº³ç‰Œä»£è¡¨æŒ‘æˆ˜
                    if ([12, 13, 15, 16, 18].includes(card.number)) {
                        luckScore += card.isReversed ? 5 : -10;
                    }
                }
                
                // æ ¹æ®å åœç±»å‹è°ƒæ•´
                if (readingType === 'love' && card.suit === 'cups') {
                    luckScore += card.isReversed ? -5 : 10;
                }
                if (readingType === 'career' && card.suit === 'wands') {
                    luckScore += card.isReversed ? -5 : 10;
                }
                if (readingType === 'financial' && card.suit === 'pentacles') {
                    luckScore += card.isReversed ? -5 : 10;
                }
            });
            
            // ç¡®ä¿åˆ†æ•°åœ¨0-100ä¹‹é—´
            luckScore = Math.max(0, Math.min(100, Math.round(luckScore)));
            
            // ç¡®å®šè¿åŠ¿ç­‰çº§å’Œé¢œè‰²
            let luckLevel, color;
            if (luckScore >= 80) {
                luckLevel = "æä½³";
                color = "#4CAF50";
            } else if (luckScore >= 60) {
                luckLevel = "è‰¯å¥½";
                color = "#8BC34A";
            } else if (luckScore >= 40) {
                luckLevel = "ä¸€èˆ¬";
                color = "#FFC107";
            } else if (luckScore >= 20) {
                luckLevel = "è¾ƒå·®";
                color = "#FF9800";
            } else {
                luckLevel = "ä¸ä½³";
                color = "#F44336";
            }
            
            return `
                <div class="luck-meter">
                    <div class="luck-level" style="width: ${luckScore}%; background: ${color};"></div>
                </div>
                <div class="luck-label">
                    <span>${luckLevel}</span>
                    <span>${luckScore}åˆ†</span>
                </div>
            `;
        }
        
        // ç”Ÿæˆè¿åŠ¿å»ºè®®
        function generateAdvice(cards, readingType) {
            const reversedCount = cards.filter(card => card.isReversed).length;
            const totalCards = cards.length;
            
            let advice = "";
            
            if (reversedCount / totalCards > 0.7) {
                advice = "å½“å‰é˜¶æ®µæŒ‘æˆ˜è¾ƒå¤šï¼Œå»ºè®®æ‚¨ä¿æŒè€å¿ƒï¼Œå®¡æ…è¡Œäº‹ã€‚é‡åˆ°å›°éš¾æ—¶ä¸è¦æ€¥äºæ±‚æˆï¼Œè€Œæ˜¯åº”è¯¥æ·±å…¥åˆ†æé—®é¢˜çš„æ ¹æºã€‚å¯ä»¥è€ƒè™‘å¯»æ±‚ä»–äººçš„å¸®åŠ©æˆ–å»ºè®®ï¼Œå…±åŒé¢å¯¹æŒ‘æˆ˜ã€‚";
            } else if (reversedCount / totalCards > 0.3) {
                advice = "è¿åŠ¿ä¸­æœ‰æŒ‘æˆ˜ä¹Ÿæœ‰æœºé‡ï¼Œå»ºè®®æ‚¨å¹³è¡¡ä¹è§‚ä¸è°¨æ…ã€‚å¯¹äºæœ‰åˆ©çš„æ–¹é¢å¯ä»¥ç§¯æè¡ŒåŠ¨ï¼Œå¯¹äºæ½œåœ¨çš„å›°éš¾è¦æå‰å‡†å¤‡ã€‚ä¿æŒçµæ´»åº”å˜çš„æ€åº¦ï¼Œå°†æœ‰åŠ©äºæ‚¨æŠŠæ¡æœºä¼šã€è§„é¿é£é™©ã€‚";
            } else {
                advice = "å½“å‰è¿åŠ¿è¾ƒä¸ºé¡ºç•…ï¼Œæ˜¯é‡‡å–è¡ŒåŠ¨çš„å¥½æ—¶æœºã€‚å»ºè®®æ‚¨æŠŠæ¡æœºä¼šï¼Œç§¯ææ¨è¿›è‡ªå·±çš„è®¡åˆ’å’Œç›®æ ‡ã€‚åŒæ—¶ä¹Ÿè¦ä¿æŒè°¦é€Šå’Œæ„Ÿæ©ä¹‹å¿ƒï¼Œä¸ä»–äººåˆ†äº«æˆåŠŸï¼Œè¿™å°†ä¸ºæ‚¨å¸¦æ¥æ›´é•¿è¿œçš„ç¦æŠ¥ã€‚";
            }
            
            // æ ¹æ®å åœç±»å‹æ·»åŠ ç‰¹å®šå»ºè®®
            const typeAdvice = {
                'daily': "ä»Šå¤©æ˜¯ä¸€ä¸ªç‰¹åˆ«çš„æ—¥å­ï¼Œæ³¨æ„è§‚å¯Ÿèº«è¾¹çš„å¾å…†å’Œæœºä¼šã€‚ä¿æŒå¼€æ”¾çš„å¿ƒæ€ï¼Œå¯èƒ½ä¼šæœ‰æ„å¤–çš„æ”¶è·ã€‚",
                'love': "åœ¨æ„Ÿæƒ…å…³ç³»ä¸­ï¼ŒçœŸè¯šæ²Ÿé€šæ˜¯è§£å†³é—®é¢˜çš„å…³é”®ã€‚è¡¨è¾¾æ‚¨çš„æ„Ÿå—ï¼ŒåŒæ—¶ä¹Ÿå€¾å¬å¯¹æ–¹çš„å¿ƒå£°ã€‚",
                'career': "èŒä¸šå‘å±•éœ€è¦é•¿æœŸè§„åˆ’ï¼ŒåŒæ—¶ä¹Ÿéœ€è¦æŠŠæ¡çœ¼å‰çš„æœºä¼šã€‚è€ƒè™‘æå‡è‡ªå·±çš„æŠ€èƒ½ï¼Œä¸ºæœªæ¥åšå¥½å‡†å¤‡ã€‚",
                'financial': "è´¢åŠ¡ç®¡ç†éœ€è¦è°¨æ…ï¼Œé¿å…å†²åŠ¨æ¶ˆè´¹å’ŒæŠ•èµ„ã€‚è€ƒè™‘åˆ¶å®šé¢„ç®—è®¡åˆ’ï¼Œåˆç†åˆ†é…èµ„æºã€‚",
                'general': "ä¿æŒç§¯æå¿ƒæ€ï¼Œç›¸ä¿¡è‡ªå·±çš„èƒ½åŠ›ï¼Œæ‚¨èƒ½å¤Ÿå…‹æœä»»ä½•æŒ‘æˆ˜ã€‚å…³æ³¨èº«å¿ƒå¥åº·ï¼Œå¹³è¡¡å·¥ä½œä¸ç”Ÿæ´»ã€‚"
            }[readingType];
            
            return advice + " " + typeAdvice;
        }
        
        // ä¿å­˜åˆ°å†å²è®°å½•
        function saveToHistory(name, question, readingType, spreadType, cards) {
            const history = JSON.parse(localStorage.getItem('tarotHistory') || '[]');
            
            const historyItem = {
                id: Date.now(),
                date: new Date().toLocaleString(),
                name,
                question,
                readingType,
                spreadType,
                cards: cards.map(card => ({
                    name: card.name,
                    isReversed: card.isReversed
                }))
            };
            
            history.unshift(historyItem);
            
            // åªä¿ç•™æœ€è¿‘10æ¡è®°å½•
            if (history.length > 10) {
                history.pop();
            }
            
            localStorage.setItem('tarotHistory', JSON.stringify(history));
            
            // æ›´æ–°å†å²è®°å½•æ˜¾ç¤º
            loadHistory();
        }
        
        // åŠ è½½å†å²è®°å½•
        function loadHistory() {
            const history = JSON.parse(localStorage.getItem('tarotHistory') || '[]');
            const historyList = document.getElementById('history-list');
            
            if (history.length === 0) {
                historyList.innerHTML = '<div class="empty-history"><p>æš‚æ— å†å²è®°å½•ï¼Œå®Œæˆä¸€æ¬¡å åœåè®°å½•å°†æ˜¾ç¤ºåœ¨è¿™é‡Œã€‚</p></div>';
                return;
            }
            
            historyList.innerHTML = history.map(item => `
                <div class="history-item">
                    <div class="history-date">${item.date}</div>
                    <div class="history-question">${item.question}</div>
                    <div class="history-cards">${item.cards.map(card => `${card.name}${card.isReversed ? '(é€†)' : ''}`).join(', ')}</div>
                </div>
            `).join('');
        }
    </script>
</body>
</html>